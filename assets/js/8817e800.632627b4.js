"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8668],{3905:(e,r,n)=>{n.d(r,{Zo:()=>p,kt:()=>m});var t=n(7294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function s(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=t.createContext({}),l=function(e){var r=t.useContext(u),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},p=function(e){var r=l(e.components);return t.createElement(u.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},c=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=l(n),m=o,f=c["".concat(u,".").concat(m)]||c[m]||d[m]||a;return n?t.createElement(f,i(i({ref:r},p),{},{components:n})):t.createElement(f,i({ref:r},p))}));function m(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=c;var s={};for(var u in r)hasOwnProperty.call(r,u)&&(s[u]=r[u]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5523:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var t=n(3117),o=(n(7294),n(3905));const a={id:"provider-intro",sidebar_position:4},i="Introduction to Azure Terraform SRE provider",s={unversionedId:"provider/provider-intro",id:"provider/provider-intro",title:"Introduction to Azure Terraform SRE provider",description:"What is CAF provider?",source:"@site/docs/provider/intro.md",sourceDirName:"provider",slug:"/provider/provider-intro",permalink:"/documentation/docs/next/provider/provider-intro",draft:!1,editUrl:"https://github.com/aztfmod/documentation/tree/main/website/docs/provider/intro.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"provider-intro",sidebar_position:4},sidebar:"cafSidebar",previous:{title:"Introduction to the CAF super-module",permalink:"/documentation/docs/next/module/module-intro"},next:{title:"Introduction to the CAF rover",permalink:"/documentation/docs/next/rover/rover-intro"}},u={},l=[{value:"What is CAF provider?",id:"what-is-caf-provider",level:2},{value:"Why using CAF provider?",id:"why-using-caf-provider",level:2},{value:"Where to find CAF provider?",id:"where-to-find-caf-provider",level:2},{value:"How to use the CAF provider?",id:"how-to-use-the-caf-provider",level:2},{value:"Names as resources",id:"names-as-resources",level:3},{value:"Names as data sources",id:"names-as-data-sources",level:3}],p={toc:l};function d(e){let{components:r,...n}=e;return(0,o.kt)("wrapper",(0,t.Z)({},p,n,{components:r,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"introduction-to-azure-terraform-sre-provider"},"Introduction to Azure Terraform SRE provider"),(0,o.kt)("h2",{id:"what-is-caf-provider"},"What is CAF provider?"),(0,o.kt)("p",null,"Naming convention is important, the CAF provider helps you manage naming convention (either relying on CAF recommended naming convention or using your own)."),(0,o.kt)("h2",{id:"why-using-caf-provider"},"Why using CAF provider?"),(0,o.kt)("p",null,"The naming convention provider allows you to:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Clean user inputs before sending to Terraform provider, verify names format, enforces prefixes/suffixes."),(0,o.kt)("li",{parentName:"ol"},"Go faster from integration to production: while you are running it testing mode, it will generate names randomly (useful to test resources which names need to be unique in the world). Once you are done and ready to deploy for production, you select pass-through mode to use your own name (after cleaning the name based on the allowed character set for each Azure resources).")),(0,o.kt)("h2",{id:"where-to-find-caf-provider"},"Where to find CAF provider?"),(0,o.kt)("p",null,"The Azure Terraform SRE provider is verified by Hashicorp and is present in the ",(0,o.kt)("a",{parentName:"p",href:"https://registry.terraform.io/providers/aztfmod/azurecaf/latest"},"Hashicorp Terraform registry here")," and you can contribute to it ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/aztfmod/terraform-azurerm-caf"},"on GitHub.")),(0,o.kt)("h2",{id:"how-to-use-the-caf-provider"},"How to use the CAF provider?"),(0,o.kt)("p",null,"To use the provider, simply add:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-terraform"},'terraform {\n  required_providers {\n    azurecaf = {\n      source = "aztfmod/azurecaf"\n      version = "~> 1.2.0"\n    }\n  }\n}\n')),(0,o.kt)("h3",{id:"names-as-resources"},"Names as resources"),(0,o.kt)("p",null,"Initially the Azure Terraform SRE provider was used to implement name and categorize them as resources, you can leverage it using the following syntax:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-terraform"},'resource "azurecaf_name" "rg_example" {\n  name            = "demogroup"\n    resource_type   = "azurerm_resource_group"\n    prefixes        = ["a", "b"]\n    suffixes        = ["y", "z"]\n    random_length   = 5\n    clean_input     = true\n}\n\nresource "azurerm_resource_group" "demo" {\n  name     = azurecaf_name.rg_example.result\n  location = "southeastasia"\n}\n\n')),(0,o.kt)("p",null,"It will generate the following outputs plan:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'Terraform will perform the following actions:\n\n  # azurecaf_name.rg_example will be created\n  + resource "azurecaf_name" "rg_example" {\n      + clean_input   = true\n      + id            = (known after apply)\n      + name          = "demogroup"\n      + passthrough   = false\n      + prefixes      = [\n          + "a",\n          + "b",\n        ]\n      + random_length = 5\n      + resource_type = "azurerm_resource_group"\n      + result        = (known after apply)\n      + results       = (known after apply)\n      + separator     = "-"\n      + suffixes      = [\n          + "y",\n          + "z",\n        ]\n      + use_slug      = true\n    }\n\n  # azurerm_resource_group.demo will be created\n  + resource "azurerm_resource_group" "demo" {\n      + id       = (known after apply)\n      + location = "southeastasia"\n      + name     = (known after apply)\n    }\n\nPlan: 2 to add, 0 to change, 0 to destroy.\n')),(0,o.kt)("h3",{id:"names-as-data-sources"},"Names as data sources"),(0,o.kt)("p",null,"Starting in the CAF provider version 1.2.22, a new feature allows you to use the provider with ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," source instead of ",(0,o.kt)("inlineCode",{parentName:"p"},"resource"),".\nThis allows compacter Terraform plans and state files and computes the name at plan time."),(0,o.kt)("p",null,"Example usage:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-terraform"},'terraform {\n  required_providers {\n    azurecaf = {\n      source = "aztfmod/azurecaf"\n      version = "~> 1.2.22"\n    }\n  }\n}\n\nprovider "azurerm" {\n  features {\n   }\n}\n\ndata "azurecaf_name" "rg_example" {\n  name            = "demogroup"\n    resource_type   = "azurerm_resource_group"\n    prefixes        = ["a", "b"]\n    suffixes        = ["y", "z"]\n    random_length   = 5\n    clean_input     = true\n}\n\nresource "azurerm_resource_group" "demo" {\n  name     = data.azurecaf_name.rg_example.result\n  location = "southeastasia"\n}\n\n\n')),(0,o.kt)("p",null,"It will generate the following output plans:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'data.azurecaf_name.rg_example: Reading...\ndata.azurecaf_name.rg_example: Read complete after 0s [id=a-b-rg-demogroup-aygcu-y-z]\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  # azurerm_resource_group.demo will be created\n  + resource "azurerm_resource_group" "demo" {\n      + id       = (known after apply)\n      + location = "southeastasia"\n      + name     = "a-b-rg-demogroup-aygcu-y-z"\n    }\n\nPlan: 1 to add, 0 to change, 0 to destroy.\n')),(0,o.kt)("p",null,"Going forward we recommend the usage of the provider as",(0,o.kt)("inlineCode",{parentName:"p"}," data source")," instead of ",(0,o.kt)("inlineCode",{parentName:"p"},"resource"),"."))}d.isMDXComponent=!0}}]);